---
import '../styles/global.css';

export interface Props {
  title: string;
  description?: string;
}

const { title, description = "Porter Management System - Professional shift management and staffing solution" } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title}</title>

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  </head>

  <body>
    <!-- Modern Navigation Header -->
    <nav style="position: fixed; top: 0; z-index: var(--z-fixed); width: 100%; background-color: var(--color-surface-elevated); border-bottom: 1px solid var(--color-border); box-shadow: var(--shadow-sm);">
      <div style="padding: var(--space-4) var(--space-6);">
        <div style="display: flex; align-items: center; justify-content: space-between;">
          <div style="display: flex; align-items: center;">
            <!-- Mobile menu button -->
            <button id="mobile-menu-toggle" type="button" style="display: none; align-items: center; justify-content: center; padding: var(--space-2); color: var(--color-text-muted); border-radius: var(--radius-lg); transition: all var(--transition-fast); border: none; background: none; cursor: pointer;">
              <span style="position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0;">Open sidebar</span>
              <svg style="width: 24px; height: 24px;" fill="currentColor" viewBox="0 0 20 20">
                <path clip-rule="evenodd" fill-rule="evenodd" d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"></path>
              </svg>
            </button>

            <!-- Modern Logo -->
            <a href="/" style="display: flex; align-items: center; margin-left: var(--space-2); text-decoration: none; transition: all var(--transition-normal);">
              <div style="width: 40px; height: 40px; background: linear-gradient(135deg, var(--color-primary-600), var(--color-primary-700)); border-radius: var(--radius-2xl); display: flex; align-items: center; justify-content: center; margin-right: var(--space-3); box-shadow: var(--shadow-lg); transition: all var(--transition-normal);">
                <i class="fas fa-hospital-user" style="color: var(--color-text-inverse); font-size: var(--font-size-lg);"></i>
              </div>
              <div style="display: flex; flex-direction: column;">
                <span style="font-size: var(--font-size-xl); font-weight: var(--font-weight-bold); color: var(--color-text-primary); line-height: var(--line-height-tight);">Porter Management</span>
                <span style="font-size: var(--font-size-xs); color: var(--color-text-muted); font-weight: var(--font-weight-medium);">Healthcare Staffing System</span>
              </div>
            </a>
          </div>

          <!-- Right side items -->
          <div style="display: flex; align-items: center; gap: var(--space-3);">
            <!-- User info -->
            <div style="display: flex; align-items: center; gap: var(--space-2);">
              <div style="width: 32px; height: 32px; background-color: var(--color-primary-600); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-user" style="color: var(--color-text-inverse); font-size: var(--font-size-sm);"></i>
              </div>
              <div style="display: flex; flex-direction: column;">
                <span style="font-size: var(--font-size-sm); font-weight: var(--font-weight-medium); color: var(--color-text-primary);">System Admin</span>
                <span style="font-size: var(--font-size-xs); color: var(--color-text-muted);">admin@porter-management.local</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <!-- Modern Sidebar -->
    <aside id="logo-sidebar" class="sidebar" aria-label="Sidebar" style="padding-top: 80px;">
      <div class="sidebar-content">
        <nav style="display: flex; flex-direction: column; gap: var(--space-1);">
          <!-- Dashboard -->
          <a href="/" class="nav-item">
            <i class="fas fa-tachometer-alt nav-icon"></i>
            <span class="nav-label">Dashboard</span>
          </a>

          <!-- Configuration -->
          <a href="/configure" class="nav-item">
            <i class="fas fa-cogs nav-icon"></i>
            <span class="nav-label">Configuration</span>
          </a>

          <!-- Reports -->
          <a href="/reports" class="nav-item">
            <i class="fas fa-chart-bar nav-icon"></i>
            <span class="nav-label">Reports</span>
          </a>

          <!-- Divider -->
          <div style="padding-top: var(--space-4); margin-top: var(--space-4); border-top: 1px solid var(--color-border);">
            <span style="font-size: var(--font-size-xs); font-weight: var(--font-weight-medium); color: var(--color-text-muted); text-transform: uppercase; letter-spacing: 0.05em;">Management</span>
          </div>

          <!-- Buildings -->
          <a href="/configure#buildings" class="nav-item">
            <i class="fas fa-building nav-icon"></i>
            <span class="nav-label">Buildings</span>
          </a>

          <!-- Departments -->
          <a href="/configure#departments" class="nav-item">
            <i class="fas fa-sitemap nav-icon"></i>
            <span class="nav-label">Departments</span>
          </a>

          <!-- Porters -->
          <a href="/configure#porters" class="nav-item">
            <i class="fas fa-users nav-icon"></i>
            <span class="nav-label">Porters</span>
          </a>

          <!-- Services -->
          <a href="/configure#services" class="nav-item">
            <i class="fas fa-concierge-bell nav-icon"></i>
            <span class="nav-label">Services</span>
          </a>

          <!-- Shifts -->
          <a href="/configure#shifts" class="nav-item">
            <i class="fas fa-clock nav-icon"></i>
            <span class="nav-label">Shifts</span>
          </a>
        </nav>
      </div>
    </aside>

    <!-- Modern Main Content -->
    <div style="padding: var(--space-6); margin-left: 288px;">
      <div style="margin-top: 80px;" class="animate-fade-in">
        <slot />
      </div>
    </div>

    <!-- Mobile menu toggle script -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
        const sidebar = document.getElementById('logo-sidebar');

        // Show mobile menu button on small screens
        function updateMobileMenu() {
          if (window.innerWidth < 640) {
            mobileMenuToggle.style.display = 'flex';
            sidebar.style.transform = 'translateX(-100%)';
          } else {
            mobileMenuToggle.style.display = 'none';
            sidebar.style.transform = 'translateX(0)';
          }
        }

        // Initial check
        updateMobileMenu();

        // Listen for window resize
        window.addEventListener('resize', updateMobileMenu);

        // Mobile menu toggle functionality
        mobileMenuToggle.addEventListener('click', function() {
          const isHidden = sidebar.style.transform === 'translateX(-100%)';
          sidebar.style.transform = isHidden ? 'translateX(0)' : 'translateX(-100%)';
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
          if (window.innerWidth < 640 &&
              !sidebar.contains(event.target) &&
              !mobileMenuToggle.contains(event.target)) {
            sidebar.style.transform = 'translateX(-100%)';
          }
        });

        // Update active navigation item
        const currentPath = window.location.pathname;
        const navItems = document.querySelectorAll('.nav-item');

        navItems.forEach(item => {
          const href = item.getAttribute('href');
          if (href === currentPath || (currentPath === '/' && href === '/')) {
            item.classList.add('active');
          }
        });
      });
    </script>
  </body>
</html>
